<!DOCTYPE html>
<html>
<head>
    <title>PokerHandEvaluator WASM Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #333;
        }
        .card-input {
            display: inline-block;
            margin: 5px;
            padding: 5px;
            width: 40px;
            text-align: center;
        }
        button {
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }
        .preset-hands {
            margin-top: 20px;
        }
        .preset-hand {
            margin: 5px 0;
            cursor: pointer;
            color: #4CAF50;
        }
    </style>
</head>
<body>
    <h1>PokerHandEvaluator WASM Demo</h1>
    
    <div>
        <h3>Enter 5 cards (e.g., "Ah" for Ace of hearts)</h3>
        <input type="text" id="card1" class="card-input" placeholder="Card 1" maxlength="2">
        <input type="text" id="card2" class="card-input" placeholder="Card 2" maxlength="2">
        <input type="text" id="card3" class="card-input" placeholder="Card 3" maxlength="2">
        <input type="text" id="card4" class="card-input" placeholder="Card 4" maxlength="2">
        <input type="text" id="card5" class="card-input" placeholder="Card 5" maxlength="2">
        <br>
        <button id="evaluate5">Evaluate 5-card Hand</button>
    </div>
    
    <div>
        <h3>Enter 7 cards for Hold'em</h3>
        <input type="text" id="card71" class="card-input" placeholder="Card 1" maxlength="2">
        <input type="text" id="card72" class="card-input" placeholder="Card 2" maxlength="2">
        <input type="text" id="card73" class="card-input" placeholder="Card 3" maxlength="2">
        <input type="text" id="card74" class="card-input" placeholder="Card 4" maxlength="2">
        <input type="text" id="card75" class="card-input" placeholder="Card 5" maxlength="2">
        <input type="text" id="card76" class="card-input" placeholder="Card 6" maxlength="2">
        <input type="text" id="card77" class="card-input" placeholder="Card 7" maxlength="2">
        <br>
        <button id="evaluate7">Evaluate 7-card Hand</button>
    </div>
    
    <div class="preset-hands">
        <h3>Preset Hands:</h3>
        <div class="preset-hand" data-hand="Ah,Kh,Qh,Jh,Th" data-type="5">Royal Flush (Ah Kh Qh Jh Th)</div>
        <div class="preset-hand" data-hand="8h,9h,Th,Jh,Qh" data-type="5">Straight Flush (8h 9h Th Jh Qh)</div>
        <div class="preset-hand" data-hand="As,Ac,Ad,Ah,Kh" data-type="5">Four of a Kind (As Ac Ad Ah Kh)</div>
        <div class="preset-hand" data-hand="Ah,As,Kh,Ks,Kd" data-type="5">Full House (Ah As Kh Ks Kd)</div>
        <div class="preset-hand" data-hand="Ah,3h,5h,7h,9h" data-type="5">Flush (Ah 3h 5h 7h 9h)</div>
        <div class="preset-hand" data-hand="9c,Td,Jh,Qs,Kc" data-type="5">Straight (9c Td Jh Qs Kc)</div>
        <div class="preset-hand" data-hand="Ah,Ad,As,Kh,Qc" data-type="5">Three of a Kind (Ah Ad As Kh Qc)</div>
        <div class="preset-hand" data-hand="Ah,As,Kh,Ks,Qc" data-type="5">Two Pair (Ah As Kh Ks Qc)</div>
        <div class="preset-hand" data-hand="Ah,As,Kh,Qc,Td" data-type="5">One Pair (Ah As Kh Qc Td)</div>
        <div class="preset-hand" data-hand="Ah,Kd,Qc,Js,9h" data-type="5">High Card (Ah Kd Qc Js 9h)</div>
        <div class="preset-hand" data-hand="Ah,Kh,Qh,Jh,Th,9h,8h" data-type="7">7-card Straight Flush (Ah Kh Qh Jh Th 9h 8h)</div>
    </div>
    
    <div id="result">Result will appear here</div>
    
    <script>
        // Load the WebAssembly module
        var Module = {
            onRuntimeInitialized: function() {
                console.log("WASM module loaded successfully!");
                document.getElementById("result").textContent = "WASM module loaded successfully!";
                
                // Add event listeners
                document.getElementById("evaluate5").addEventListener("click", evaluate5CardHand);
                document.getElementById("evaluate7").addEventListener("click", evaluate7CardHand);
                
                // Add event listeners for preset hands
                const presetHands = document.getElementsByClassName("preset-hand");
                for (let i = 0; i < presetHands.length; i++) {
                    presetHands[i].addEventListener("click", loadPresetHand);
                }
            }
        };
        
        function loadPresetHand(event) {
            const cards = event.target.getAttribute("data-hand").split(",");
            const type = event.target.getAttribute("data-type");
            
            if (type === "5") {
                for (let i = 0; i < 5; i++) {
                    document.getElementById("card" + (i+1)).value = cards[i];
                }
                evaluate5CardHand();
            } else if (type === "7") {
                for (let i = 0; i < 7; i++) {
                    document.getElementById("card7" + (i+1)).value = cards[i];
                }
                evaluate7CardHand();
            }
        }
        
        function evaluate5CardHand() {
            const cards = [
                document.getElementById("card1").value,
                document.getElementById("card2").value,
                document.getElementById("card3").value,
                document.getElementById("card4").value,
                document.getElementById("card5").value
            ];
            
            // Check if all cards are entered
            if (cards.some(card => !card)) {
                document.getElementById("result").textContent = "Please enter all 5 cards";
                return;
            }
            
            try {
                const score = Module.evaluate5FromStrings(cards[0], cards[1], cards[2], cards[3], cards[4]);
                
                if (score === -1) {
                    document.getElementById("result").textContent = "Invalid card format. Use format like 'Ah' for Ace of hearts.";
                } else {
                    let handName = getHandName(score);
                    document.getElementById("result").textContent = `Hand: ${handName} (Score: ${score})`;
                }
            } catch (error) {
                document.getElementById("result").textContent = "Error: " + error.message;
                console.error(error);
            }
        }
        
        function evaluate7CardHand() {
            const cards = [
                document.getElementById("card71").value,
                document.getElementById("card72").value,
                document.getElementById("card73").value,
                document.getElementById("card74").value,
                document.getElementById("card75").value,
                document.getElementById("card76").value,
                document.getElementById("card77").value
            ];
            
            // Check if all cards are entered
            if (cards.some(card => !card)) {
                document.getElementById("result").textContent = "Please enter all 7 cards";
                return;
            }
            
            try {
                const score = Module.evaluate7FromStrings(
                    cards[0], cards[1], cards[2], cards[3], cards[4], cards[5], cards[6]
                );
                
                if (score === -1) {
                    document.getElementById("result").textContent = "Invalid card format. Use format like 'Ah' for Ace of hearts.";
                } else {
                    let handName = getHandName(score);
                    document.getElementById("result").textContent = `Hand: ${handName} (Score: ${score})`;
                }
            } catch (error) {
                document.getElementById("result").textContent = "Error: " + error.message;
                console.error(error);
            }
        }
        
        // Convert score to hand name
        function getHandName(score) {
            if (score <= 1) return "Royal Flush";
            if (score <= 10) return "Straight Flush";
            if (score <= 166) return "Four of a Kind";
            if (score <= 322) return "Full House";
            if (score <= 1599) return "Flush";
            if (score <= 1609) return "Straight";
            if (score <= 2467) return "Three of a Kind";
            if (score <= 3325) return "Two Pair";
            if (score <= 6185) return "One Pair";
            return "High Card";
        }
    </script>
    <script src="phevaluator.js"></script>
</body>
</html> 